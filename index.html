<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" 
            content="width=device-width
            initial-scale=1.0">
        <!--==================== UNICONS ====================-->
        <link rel="stylesheet" 
            href="https://unicons.iconscout.com/release/v4.0.0/css/line.css">       
        <!--==================== CSS ====================-->
        <link rel="stylesheet" 
            href="styles.css">
        <!--==================== BOOTSTRAP ====================-->
        <link rel="stylesheet" 
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
            integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" 
            crossorigin="anonymous">
        <title>COVID 19 Tracker</title>
    </head>
    <body>
        <!--==================== HEADER ====================-->
        <header class="header" id="header">
            <div>
                <i class="uil uil-coronavirus"></i>
                <a href="#home" class="nav_logo">
                    OMNI STATS
                </a>
            </div>
            <div class="nav_menu" id="nav-menu">
                <ul class="nav_list grid">
                    <li class="nav_item">
                        <a href="#home"
                            class="nav_link active-link">
                            <i class="uil uil-estate nav_icon"></i>
                        Dashboard
                        </a>
                    </li>
                    <li class="nav_item">
                        <a 
                        href="https://api.covid19api.com/summary"
                        target=”_blank”
                        class="nav_link">
                        <i class="uil uil-user nav_icon"></i>
                        Data Manager
                        </a>
                    </li>
                    <li class="nav_item">
                        <a 
                        href="help.html"
                        class="nav_link">
                        <i class="uil uil-file-alt nav_icon"></i>
                        Help
                        </a>
                    </li>
                </ul>
                <i class="uil uil-times nav_close"
                id="nav-close">
                </i>
            </div>
            <div class="nav_btns">
                <!-- Theme Change Button -->
                <i class="uil uil-moon change-theme"
                id= "theme-button">
                </i>
                <div class="nav_toggle" 
                    id="nav-toggle">
                    <i class="uil uil-apps"></i>
                </div>
            </div> 
        </header>
        <!--==================== TOOLBAR ====================--> 
        <div class="topline"></div>
            <div class= "toolbar">
                <div class="toolbar9">
                    <button class="filter">
                        <i class="uil uil-draggabledots"></i>
                        <span class="filter1"
                            id="filter1">
                            0 Filters
                        </span>
                    </button>
                    <div class="filter2" 
                        onclick="removeFilter()">
                        <i class="uil uil-filter-slash"></i>
                        <span class="filter3">Remove Filter</span>
                    </div>
                </div>
                <div class="filter5">
                    <div class="home_title">COVID 19 Live Data Tracker</div>
                    <div class="home_subtitle">Source: Johns Hopkins University CSSE</div>
                </div>
                <div class="filter2"
                    onclick="refreshButton()">
                    <i class="uil uil-refresh"></i>
                    <span class="filter3">Refresh</span>
                </div>
                <div class="services_modal">
                    <div class="services_modal-content">
                        <h4 class="services_modal-title"> Select A Country:</h4>
                        <i class="uil uil-times services_modal-close"></i>
                        <div id="slideContainer"></div>
                    </div>
                </div>
            </div>
        <div class="bottomline"></div>
        <!--==================== STATS ====================--> 
        <div class="stat">
            <div class="stat1">
                <div class="stat2">Total Cases</div>
                <hr>
                <div id="data">
                    <div class="stat3"></div>
                </div>
            </div>
            <div class="stat1">
                <div class="stat2">Total Deaths</div>
                <hr>
                <div id="data1">
                    <div class="stat3"></div>
                </div>
            </div>
            <div class="stat1">
                <div class="stat2">Total Recovered</div>
                <hr>
                <div id="data2">
                    <div class="stat3"></div>
                </div>
            </div>
            <div class="stat1">
                <div class="stat2">Mortality Rate </div>
                <hr>
                <div id="data3">
                    <div class="stat3"></div>
                </div>
            </div>
        </div>
        <!--==================== VISUALS ====================-->
        <div class="visuals"> 
            <div class="visuals1">
                <div class="visuals2">Total Recovered</div>
                <hr>
                <div class="visuals3">647,448</div>
            </div>
            <div class="visuals1">
                <div class="visuals2">Mortality Rate </div>
                <hr>
                <div class="visuals3">5.67%</div>
            </div>
        </div>
        <!--==================== SCROLL TOP ====================--> 
        <a href="#" 
        class="scrollup" 
        id="scroll-up">
        <i class="uil uil-arrow-up scrollup_icon"></i>
        </a>

        <!--==================== JQUERY API ====================-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <!--==================== MAIN JS ====================--> 
        <!--==================== FILTER MODAL OPEN/CLOSE UNLIMITED TIMES (FOR EACH ROTATIONS)====================-->       
        <script>
            const modalBtns = document.querySelectorAll(".filter"),
            modalViews = document.querySelectorAll(".services_modal"),
            modalCloses = document.querySelectorAll(".services_modal-close")

            let modal = function (modalClick){
            modalViews[modalClick].classList.add("active-modal")
            }

            modalBtns.forEach((z, i) => {
                z.addEventListener("click",() =>{
                    modal(i)
                })
            })

            modalCloses.forEach((x) => {
                x.addEventListener("click", () =>{
                    modalViews.forEach((y) =>{
                        y.classList.remove("active-modal")
                    })
                })
            })
            </script>
            <!--==================== COUNTRY LIST ====================--> 
            <script>
            const list= [
            'USA (United States of America)',
            'UK (United Kingdom)' ,
            'China',
            'India'	 ,
            'Afghanistan',	 	 
            'Albania',	 
            'Algeria',	 	 
            'Andorra',	 
            'Angola',	 
            'Anguilla',	 
            'Antigua and Barbuda'	, 
            'Argentina'	 ,
            'Armenia'	 ,
            'Aruba'	 , 
            'Austria'	 ,
            'Azerbaijan',	 
            'Bahamas'	 ,
            'Bahrain'	 ,
            'Bangladesh',	 
            'Barbados'	, 
            'Belarus	' ,
            'Belgium	 ',
            'Belize	 ',
            'Benin	' ,
            'Bermuda	' ,
            'Bhutan'	 ,
            'Bolivia ',	 
            'Bosnia and Herzegovina	', 
            'Botswana'	 ,
            'Brazil	' ,
            'British Virgin Islands'	 ,
            'Brunei Darussalam'	 ,
            'Bulgaria'	 ,
            "Burkina Faso"	 ,
            'Burundi'	 ,
            'Cabo Verde',	 
            'Cambodia'	 ,
            'Cameroon'	 ,
            'Canada'	 ,
            'Cayman Islands	 ',
            'Central African Republic	',	 
            'Chad'	 ,
            'Chile'	 ,
            'Colombia',	 
            'Comoros'	 ,
            'Congo',	 
            'Cook Islands	' ,
            "Costa Rica"	 ,
            "Côte d'Ivoire	",
            'Croatia'	 ,
            'Cuba'	 ,
            'Curaçao'	 ,
            'Cyprus'	 ,
            'Czechia'	 ,
            "Democratic People's Republic of Korea	 ",
            'Democratic Republic of the Congo	' ,
            'Denmark'	 ,
            'Djibouti'	 ,
            'Dominica'	, 
            'Dominican Republic	 '	 ,
            'Ecuador	' ,
            'Egypt'	 ,
            'El Salvador'	, 
            'Equatorial Guinea	' ,
            'Eritrea'	 ,
            'Estonia'	 ,
            'Ethiopia'	 ,
            'Fiji'	 ,
            'Finland'	 ,	 
            'France'	 ,
            'French Polynesia',
            'Gabon'	 ,
            'Gambia'	 ,
            'Georgia'	 ,
            'Germany'	 ,
            'Ghana'	 ,
            'Greece'	 ,
            'Greenland',	 
            'Grenada'	 ,
            'Guatemala',	 
            'Guinea'	 ,
            'Guinea-Bissau',	 
            'Guyana'	 ,
            'Haiti'	 ,
            'Honduras',	 
            'Hungary'	 ,
            'Iceland'	 ,
            'Indonesia',	 
            'Iran'	 ,
            'Iraq'	 ,
            'Ireland'	 ,
            'Israel'	 ,
            'Italy'	 ,
            'Jamaica'	 ,
            'Japan'	 ,
            'Jordan'	 ,
            'Kazakhstan',	 
            'Kenya'	 ,
            'Kingdom of Eswatini'	, 
            'Kiribati'	 ,
            'Kosovo'	 ,
            'Kuwait'	 ,
            'Kyrgyzstan',	 
            "Lao People's Democratic Republic	"  ,
            'Latvia'	 ,
            'Lebanon'	 ,
            'Lesotho'	 ,
            'Liberia'	 ,
            'Libya'	 ,
            'Liechtenstein',	 
            'Lithuania'	 ,
            'Luxembourg'	 ,
            'Madagascar'	 ,
            'Malawi'	 ,
            'Malaysia',	 
            'Maldives',	 
            'Mali'	 ,
            'Malta'	 ,
            'Marshall Islands'	, 
            'Mauritania'	 ,
            'Mauritius'	 ,
            'Melanesia'	 ,
            'Mexico'	  ,
            'Micronesia',	 	 
            'Monaco'	 ,
            'Mongolia'	, 
            'Montenegro'	 ,
            'Montserrat'	 ,
            'Morocco'	 ,
            'Mozambique',	 
            'Myanmar'	 ,
            'Namibia'	 ,
            'Nauru'	 ,
            'Nepal'	 ,
            'Netherlands'	, 
            'New Caledonia',	 
            'New Zealand'	, 
            'Nicaragua'	 ,
            'Niger'	 ,
            'Nigeria'	 ,	 
            'Norway'	 ,
            'Oman',
            'Pakistan'	 ,
            'Palau'	 ,
            'Panama'	 ,
            'Papua New Guinea'	, 
            'Paraguay'	 ,
            'Peru'	 ,
            'Philippines',	 
            'Poland'	 ,
            'Polynesia',	 
            'Portugal',	 
            "Puerto Rico"	, 
            'Qatar	' ,
            'Republic of Korea'	 ,
            'Republic of Moldova'	, 
            'Republic of North Macedonia'	, 
            'Romania'	 ,
            'Russian Federation'	 ,
            'Rwanda'	 ,
            'Saint Kitts and Nevis	 ',
            'Saint Lucia	 ',
            'Saint Vincent and the Grenadines'	 ,
            'Samoa'	 ,
            'San Marino',	 
            'Sao Tome and Principe	 ',
            'Saudi Arabia'	 ,
            'Senegal	' ,
            'Serbia'	 ,
            'Seychelles',	 
            'Sierra Leone',	 
            'Singapore'	 ,
            'Sint Maarten' ,
            'Slovakia',	 
            'Slovenia'	, 
            'Solomon Islands'	 ,
            'Somalia'	 ,
            'South Africa',	 
            'South Sudan	 '	 ,
            'Spain',	 
            "Sri Lanka",	 
            'State of Palestine'	, 	 
            'Sudan'	, 
            'Suriname'	, 
            'Sweden	' ,
            'Switzerland'	 ,
            'Syrian Arab Republic'	 ,
            'Tajikistan	' ,
            'Thailand	', 
            'Timor-Leste'	, 
            'Togo'	, 
            'Tonga'	 ,
            'Trinidad and Tobago'	, 
            'Tunisia'	 ,
            'Turkey'	 ,
            'Turkmenistan'	 ,
            'Turks and Caicos Islands	' ,
            'Tuvalu'	 ,
            'Uganda	' ,
            'Ukraine'	 ,
            'United Arab Emirates'	 ,
            'Tanzania'	 , 
            'Uruguay'	 ,
            'Uzbekistan',	 
            'Vanuatu'	 ,
            'Venezuela'	 ,
            'Vietnam'	 	, 
            'Yemen'	  ,
            'Zambia	' ,
            'Zimbabwe' ,
            ]
            </script>
            <!--==================== GET COUNTRY FOR FILTER ====================--> 

            <script>
                function countryFilter(x){
                    const hhh= document.getElementById("option")
                    console.log(x.value+"hello")
                    
                    const modalViews = document.querySelectorAll(".services_modal")
                    console.log(modalViews)
                    modalViews.forEach((y) =>{
                        y.classList.remove("active-modal")
                    })
                   
                    var url= "https://api.covid19api.com/summary"  
                    $.get(url,function(data){
                    for (var i= 0; i <192; i++){
                        var fff= (data.Countries[i].Country).toLocaleString()
                        console.log(fff)

                        if (fff == x.value){
                            var xxx= `
                                <div> ${(data.Countries[i].TotalConfirmed).toLocaleString()}
                                    </div>
                                `
                                document.getElementById("data").innerHTML = xxx
                            var yyy = `
                            <div>${(data.Countries[i].TotalDeaths).toLocaleString()}
                            </div>
                                ` 
                                document.getElementById("data1").innerHTML = yyy    
                            var zzz = `
                            ${(data.Countries[i].TotalConfirmed).toLocaleString()}
                                     ` 
                            var ccc = `
                            ${(data.Countries[i].TotalDeaths).toLocaleString()}
                                `   
                                console.log(zzz)
                                var formatted = zzz.replace(',','')
                                console.log(formatted)
                                var formatted1= formatted.replace(",","")
                                var converted = parseFloat(formatted1)
                                console.log(converted)

                                console.log(ccc)
                                var formatted = ccc.replace(',','')
                                console.log(formatted)
                                var formatted1= formatted.replace(",","")
                                var converted1 = parseFloat(formatted1)
                                console.log(converted1)


                                console.log(typeof(converted1))
                                ddd= (converted - converted1).toLocaleString("en-US")
                                document.getElementById("data2").innerHTML = ddd

                                fff= (converted1 / converted)
                                document.getElementById("data3").innerHTML = (fff*100).toFixed(2) + "%" 

                                bbb= `
                                <span class="filter1"
                                    id="filter1">
                                    ${x.value}
                                </span>
                                `
                                document.getElementById("filter1").innerHTML = bbb

                            
                        }
                        else{
                        console.log("no")
                        }
                        
                    }
                }
            )





                }
            </script>
            <!--==================== COUNTRY LIST POPULATE SELECT ====================--> 

            <script>
            /* ------- list.forEach(x => console.log(x)) ------- */ 
            var str = '<select id= "option" onchange="countryFilter(this)">'

            list.forEach(function(x) {
                str += '<option class= "option" value=' + x + '>'+ x + '</option>';
            }); 

            str += '</select>';
            document.getElementById("slideContainer").innerHTML = str;
            </script>
            <!--==================== GLOBAL STATS API PULL ====================--> 
            <script>
        function GlobalDataLoad() {
            var url= "https://api.covid19api.com/summary" 
            console.log(url)  
            $.get(url,function(data){
                var xxx = `        
                    <div>${(data.Global.TotalConfirmed).toLocaleString()}
                    </div>
                        `   
                        document.getElementById("data").innerHTML = xxx
                var yyy = `
                    <div>${(data.Global.TotalDeaths).toLocaleString()}
                    </div>
                        ` 
                        document.getElementById("data1").innerHTML = yyy 
                var zzz = `
                    ${(data.Global.TotalConfirmed).toLocaleString()}
                        ` 
                var ccc = `
                    ${(data.Global.TotalDeaths).toLocaleString()}
                        `   
                        console.log(zzz)
                        var formatted = zzz.replace(',','')
                        console.log(formatted)
                        var formatted1= formatted.replace(",","")
                        var converted = parseFloat(formatted1)
                        console.log(converted)

                        console.log(ccc)
                        var formatted = ccc.replace(',','')
                        console.log(formatted)
                        var formatted1= formatted.replace(",","")
                        var converted1 = parseFloat(formatted1)
                        console.log(converted1)


                        console.log(typeof(converted1))
                        ddd= (converted - converted1).toLocaleString("en-US")
                        document.getElementById("data2").innerHTML = ddd

                        fff= (converted1 / converted).toFixed(4)
                        document.getElementById("data3").innerHTML = fff*100 + "%" 
            })
        }

        GlobalDataLoad()



            
                /*==================== SCROLL SECTIONS ACTIVE LINK ====================*/
            const sections = document.querySelectorAll("section[id]")

            function scrollActive(){
                const sscrollY = window.pageYOffset

                sections.forEach(current =>{
                    const sectionHeight= current.offsetHeight
                    const sectionTop= current.offsetTop - 50
                    sectionId= current.getAttribute("id")

                    if(scrollY > sectionTop && scrollY <= sectionTop + sectionHeight){
                        document.querySelector('.nav_menu a[href*=' + 
                        sectionId + ']').classList.add("active-link")
                    }
                    else{
                        document.querySelector('.nav_menu a[href*=' + 
                        sectionId + ']').classList.remove("active-link")
                    }
                })
            }
            window.addEventListener("scroll", scrollActive)


            /*==================== CHANGE BACKGROUND HEADER ====================*/ 
            function scrollHeader(){
                const nav = document.getElementById("header")
                if(this.scrollY >= 80) nav.classList.add("scroll-header")
                else nav.classList.remove("scroll-header")
            }
            window.addEventListener("scroll", scrollHeader)

            /*==================== SHOW SCROLL UP ====================*/ 
            function scrollUp(){
                const scrollUp = document.getElementById("scroll-up")
                if(this.scrollY >= 560) scrollUp.classList.add("show-scroll")
                else scrollUp.classList.remove("show-scroll")
            }
            window.addEventListener("scroll", scrollUp)

            /*==================== DARK LIGHT THEME ====================*/ 
            const themeButton = document.getElementById("theme-button")
            const darkTheme = "dark-theme"
            const iconTheme = "uil-sun"
            const ttt= document.getElementsByTagName("html")[0]

            const selectedTheme = localStorage.getItem("selected-theme")
            const selectedIcon = localStorage.getItem("selected-icon")

            const getCurrentTheme = () => document.body.classList(darkTheme) ? "dark" : "light"
            const getCurrentIcon = () => themeButton.classList.contains(iconTheme) ? "uil-moon" : "uil-sun"


            if (selectedTheme) {
                document.body.classList[selectedTheme === "dark" ? "add" : "remove"] (darkTheme)
                themeButton.classList[selectedIcon === "uil-moon" ? "add" : "remove"] (iconTheme)    
            }

            themeButton.addEventListener("click", () =>{
                document.body.classList.toggle(darkTheme)
                themeButton.classList.toggle(iconTheme)
                ttt.classList.toggle("dark")
                localStorage.setItem("selected-theme", getCurrentTheme())
                localStorage.setItem("selected-icon", getCurrentIcon())
            })


            /*==================== COLLAPSES MENU WHEN LINK IS CLICKED 101021 ====================*/
            const navLink = document.querySelectorAll(".nav_link")

            function linkAction(){
                const navMenu = document.getElementById("nav-menu")
                navMenu.classList.remove("show-menu")
            }
            navLink.forEach(n => n.addEventListener("click", linkAction))

            /*==================== MENU SHOW Y HIDDEN ====================*/
            const navMenu = document.getElementById("nav-menu"),
                navToggle = document.getElementById("nav-toggle"),
                navClose = document.getElementById("nav-close")

            /*===== MENU SHOW =====*/
            /* Validate if constant exists */
            if(navToggle){
                navToggle.addEventListener("click", () => {
                    navMenu.classList.add("show-menu")
                })
            }


            /*===== MENU HIDDEN =====*/
            /* Validate if constant exists */
            if(navClose){
                navClose.addEventListener("click", ()=>{
                    navMenu.classList.remove("show-menu")
                })
            }

            /*===== REMOVE FILTER BUTTON =====*/

            function removeFilter(){
                    clearData()
                    GlobalDataLoad()
                }
                function clearData(){
                    $("#data").empty(),
                    $("#data1").empty(),
                    $("#data2").empty(),
                    $("#data3").empty()

                    aaa= ` <span class="filter1"
                                    id="filter1">
                                    0 Filters
                                </span>
                                `
                    document.getElementById("filter1").innerHTML = aaa
                }
                        

             /*==================== REFRESH BUTTON  ====================*/ 
             function refreshButton(){ 
                const zzz = document.getElementById("filter1")
                eee = zzz.textContent
                yyy= eee.replace(/\s+/g, '')
                console.log(yyy)
                if (yyy=="0Filters"){
                    clearData()
                    GlobalDataLoad()
                }
                else{
                    const mariners= document.getElementById("filter1")
                        const padres= mariners.textContent
                        const angels= padres.replace(/\s+/g, '')
                        console.log(angels)
                    clearData()
                    
                    var url= "https://api.covid19api.com/summary"  
                    $.get(url,function(data){
                    
                    for (var i= 0; i <192; i++){
                        var fff= (data.Countries[i].Country).toLocaleString()
                    
                        
                        if (fff == angels){
                            var xxx= `
                                <div> ${(data.Countries[i].TotalConfirmed).toLocaleString()}
                                    </div>
                                `
                                document.getElementById("data").innerHTML = xxx
                            var yyy = `
                            <div>${(data.Countries[i].TotalDeaths).toLocaleString()}
                            </div>
                                ` 
                                document.getElementById("data1").innerHTML = yyy    
                            var zzz = `
                            ${(data.Countries[i].TotalConfirmed).toLocaleString()}
                                     ` 
                            var ccc = `
                            ${(data.Countries[i].TotalDeaths).toLocaleString()}
                                `   
                                console.log(zzz)
                                var formatted = zzz.replace(',','')
                                console.log(formatted)
                                var formatted1= formatted.replace(",","")
                                var converted = parseFloat(formatted1)
                                console.log(converted)

                                console.log(ccc)
                                var formatted = ccc.replace(',','')
                                console.log(formatted)
                                var formatted1= formatted.replace(",","")
                                var converted1 = parseFloat(formatted1)
                                console.log(converted1)


                                console.log(typeof(converted1))
                                ddd= (converted - converted1).toLocaleString("en-US")
                                document.getElementById("data2").innerHTML = ddd

                                fff= (converted1 / converted)
                                document.getElementById("data3").innerHTML = (fff*100).toFixed(2) + "%" 

                                bbb= `
                                <span class="filter1"
                                    id="filter1">
                                    ${angels}
                                </span>
                                `
                                document.getElementById("filter1").innerHTML = bbb

                            
                        }
                        else{
                        console.log("no")
                        }
                        
                    }
                }
            )





                
                    
                    

                    

                }
             }
               
             

            </script>













 
    </body>
</html>
